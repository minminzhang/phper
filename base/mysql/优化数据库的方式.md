## 数据库优化

#### 1，选择最适用的字段属性
MySQL可以很好的支持大数据量的存取，但是一般来说，数据库中的表越小，在它上面执行的查询也就越快。
因此，在创建表的时候，为了获得更好的性能，我们可以将表中字段的宽度设置的尽可能小。

比如：在定义邮政编码字段时，如果将其设置为CHAR(255)，显然给数据库增加了不必要的空间，甚至使用VARCHAR这种类型也是多余的，
因为CHAR(6)就可以很好的完成任务了。同样的，如果可以的话，我们应该使用mediumint而不是bigint来定义整型字段。

另外一个提高效率的方法是在可能的情况下，应该尽量把字段设置成 NOT NULL ，这样再将来执行查询的时候数据库不用去比较 NULL 值。
对于某些文本字段，例如“省份”或者“性别”，我们可以将他们定义成 enum 类型。因为在MySQL中，enum类型被当做数值类型来处理，
而数值型数据处理起来的速度比文本类型快得多。这样我们又可以提高数据库的性能。
#### 2，适用连接（join）来代替子查询
使用子查询可以一次性完成很多逻辑上需要多个步骤才能完成的SQL操作，同时也可以避免事务或者表锁死，并且写起来也很容易。
但是在有些情况下，子查询可以被更有效率的JOIN 连接替代。例如：假设我们需要把所有没有订单记录的用户取出来，
```
select * from customerinfo where customerid not in ( select customerid from salesinfo )
```
如果使用连接来完成这个查询工作，速度将会快很多。尤其是当 salesinfo 表中对 customerid 建立索引的话，性能将会更好，查询如下：
```
select * from customerinfo 
left join salesinfo where customerinfo.customerid = salesinfo.customerid 
where salesinfo.customer.id is null
```
连接（JOIN）之所以效率高，是因为MySQL不需要在内存中创建临时表来完成这个逻辑上需要两个步骤的查询工作。
###### 3，适用联合（union）来代替手动创建的临时表
MySQL从4.0版本开始支持union查询，它可以把需要使用临时表的条件或更多的select查询合并成一个。
在客户端会话结束的时候，临时表会被自动删除，从而保证数据库整齐、高效。
使用union来创建查询的时候，
###### 4，事务
###### 5，锁定表
###### 6，使用外键
###### 7，使用索引
###### 8，优化查询语句
