#### B树（B-tree、B-树）
```
B树是一种平衡的多路搜索树，多用于文件系统、数据库的实现

最核心的特点如下：
  1. 多路，非二叉树
  2. 每个节点及保存索引，又保存数据
  3. 搜索时相当于二分查找
```
#### B+树
```
B+树是B-树的变种

最核心的特点如下：
  1. 多路，非二叉树
  2. 只有叶子结点保存数据
  3. 搜索时相当于二分查找
  4. 增加了相邻节点的指向指针
```

 以上可以看出最核心的区别有俩：1. 数据的保存位置；2. 相邻节点的指向；
 就是这俩区别造成了MongoDB和MySQL的差别。
 
 #### B-树和B+树的区别：
 ```
 1. B+树查询时间复杂度固定是logN，B-树查询复杂度最好是O(1)
 2. B+树相邻节点的指针可以大大增加区间访问性，可使用在范围查询等，而B-树每个节点key和data在一起，则无法区间查找
 3. B+树更适合外部存储，也就是磁盘存储。由于内节点无data域，每个节点能索引的范围更大更精确
 4. B-树每个节点及保存数据有保存索引，所以磁盘IO的次数很少，B+树只有叶子节点保存数据，磁盘IO多，但是区间访问比较好
 ```
 
 ```
 1. MongoDB是文档型数据库，是一种nosql，它使用类似json的格式保存数据。
   使用B-树，所有节点都有Data域，只要找到指定索引就可以进行访问，无疑单次查询平均快于MySQL。
 2.MySQL作为一个关系型数据库，数据的关联性非常强，区间访问是常见的一种情况。
   B+数由于数据全部存在于叶子节点，并且通过指针串在一起，这样就很容易进行区间遍历甚至全部遍历。
 ```
 
 #### 什么是MySQL的回表
 ```
 B-树和B+数两者的区别在于
 1. B-Tree中所有节点都会带有指向具体记录的指针；B+Tree树中只有叶子结点会带有指向具体记录的指针。
 2. B-Tree中不同的叶子节点之间没有连接在一起；B+Tree树中所有的叶子节点通过指针连接在一起。
 3. B-Tree中可能在非叶子节点就拿到了指向具体记录的指针，搜索效率不稳定；B+Tree树中一定要到叶子节点才能拿到指向具体记录的指针，搜索效率稳定。
 ```
 基于以上分析，可以得出
 ```
 1. B+Tree树中，由于非叶子节点不带有指向具体记录的指针，所以非叶子节点中可以存储更多的索引项，可以有效降低树的高度，进而提高搜索的效率。
 2. B+Tree树中，叶子节点通过指针连接在一起，这样如果有范围扫描的需求，那么实现起来将非常容易，而对于B-Tree树扫描需要在叶子结点和非叶子节点之间移动。
 ```
 
 ```
 MySQL的索引按照物理存储方式可以分为：聚簇索引和非聚簇索引。
 我们日常说的主键索引就是聚簇索引，其他的都称之为非主键索引。非主键索引也被称为二级索引或者辅助索引
 
 对于主键索引和非主键索引存储的数据结构都是B+Tree，唯一的区别在于叶子结点中存储的内容不同：
   - 主键索引的叶子节点存储的是一行完整的数据
   - 非主键索引的叶子节点存储的是则是主键值
 
 所以当我们需要查询的时候：
 1. 如果是通过主键索引来查询数据，如 select * from users where id=100;那么此时只需要搜索主键索引的B+Tree就可以找到数据。
 2. 如果通过非主键索引来查询数据，如 select * from users where username='aaa';那么此时需要先搜索username 这一索引的B+Tree树，
    搜索完成后得到主键的值，然后再搜索主键索引的B+Tree，就可以获取到一行完整的数据。
    
 对于第二种查询方式，一共搜索了两颗B+Tree树，第一次搜索B+Tree树拿到主键的值，然后再去搜索主键索引的B+Tree，这个过程就是所谓的回表。
 
 一定会回表吗？不一定，如果查询的列本身就存在索引中，那么即使使用二级索引，一样也是不需要回表的。
 举个例子：users表中username 和 address 组成了一个复合索引，
 select username,address from users where username='aaa';
 那么此时，虽然是一个二级索引，但是索引树的叶子节点中除了保存主键值，也保存了address的值
 ```
 
 
 
 
 
 
 
 
 
 
