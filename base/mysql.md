## char和varchar的区别

char和varchar是MySQL提供的两种相似的列，都能存储字符或字符串；

#### 区别

对于char类型来说，它存储的列的长度是不可变的，而varchar类型的列可以存储可变长度的字符串。

插入时：比如char(5)表示这个列占用的存储空间一直是5个字符，你可以往char(5)的a列里插入"abc"，很显然是3个字符而不是5个字符，此时MySQL底层会替你在"abc"后面追加两个空格字符为"abc  "。

检索时：当你往外检索上面提到的a列时，MySQL会自动帮你做一次trim()操作，去掉最后的空格，返回"abc"


###### 假如建表语句是这样的

```
create table t( a char(5))
charset=utf8 engine=innoDB;
```
注意表的字符集是GBK

问题1，：下面两条语句能执行成功吗？为什么？
```
insert into t select '12345';
insert into t select '这次是汉字';
```
解释：以上两条sql都能执行成功，创建数据表时指定char(5)意思是这列可以存储5个字符，而不是五个字节。
对于数字来说是包含在utf8中的，并且每个数字占用一个字节，中文也被包含在utf8中，每个中文占三个字节。

综上：当charset为utf8时，char(5)可以存储的字节范围为[5, 5*3]
当使用的字符编码不同时，char能存储的字节数是会变化的。

问题2：
建表
```
create table t(b varchar(2))
charset=utf8 engine=innoDB;
```
插入数据
```
insert into t select 'abcd';
```
很明显varchar的期望长度是2，但是插入的字符串长度为4，此时sql能否执行成功取决于sql mode ,
当sql mode 为严格（strict）模式时，上面的sql会报错
当sql mode 为非严格模式时，MySQL将超出2个字符以外的字符砍掉了，保留'ab'然后存入数据库。



## MySQL常用数据库的存储引擎和他们的区别

```
使用 SHOW ENGINES ;可以查看MySQL中的存储引擎
```

InnoDB给MySQL的表提供了事务处理、回滚、崩溃修复能力和多版本并发控制的事务安全。

###### InnoDB

支持AUTO_INCREMENT，自动增长列的值不能为空，并且必须唯一。
支持外键（FOREING KEY）。
表结构存储在.frm文件中，数据和索引存储在innodb_data_home_dir 和 innodb_data_file_path定义的表空间中
优势在于提供了良好的事务处理、崩溃修复能力和并发控制。缺点是读写效率较差，占用的数据空间相对较大。

支持事务处理，支持外键，支持崩溃修复能力和并发控制。如果需要对事物的完整性要求比较高（比如银行），要求实现并发控制（比如售票），选择InnoDB有很大的优势。
如果需要频繁的更新删除操作的数据库，也可以选择InnoDB，以为支持事务的提交（commit）和回滚（rollback）

###### MyISAM 

frm文件存储表的结构，MYD文件存储数据。MYI文件存储索引
优势在于占用空间小，处理速度快。缺点是不支持事务的完整性和并发性。

插入数据快，空间和内存使用比较低，如果表主要用于插入新纪录和读出记录，那么选择MyISAM处理能实现高效率。如果应用的完整性、并发性要求比较低也可以使用。

###### MEMORY

所有的数据都在内存中，数据的处理速度快，但是安全性不高，如果需要很快的读写速度，对数据的安全性要求较低，可以选择MEMORY。
它对表的大小有要求，不能建立太大的表，所以这类引擎只使用在相对较小的数据库表

